<!DOCTYPE html>
<html>
<head>
 
  <title>Device Control</title>
  <link rel="stylesheet" href="/style.css">
</head>
<body>
     <div class="topnav">
     <a href="/dashboard.html">Dashboard</a>
    <a href="/monitor.html">Monitor</a>
    <a class="active" href="/control.html">Control</a>
    <a href="/setup.html">Setup</a>
    <a href="/update.html">Update</a>
  </div>
  <div class="container">
    <h1>Control Panel</h1>

    <h2>Send Message</h2>
    <button onclick="sendMessage('S1')">📨 Message S1</button>
    <button onclick="sendMessage('S2')">📨 Message S2</button>
    <button onclick="sendMessage('S3')">🚨 Message S3</button>
    <button onclick="sendMessage('S4')">🆘 Message S4</button>

    <h2>Utilities</h2>
    <button onclick="restartDevice()">🔁 Restart Device</button>

    <!-- Expandable control section -->
    <h2>Test Outputs</h2>
    <button onclick="triggerTest('led')">💡 Toggle LED</button>
    <button onclick="triggerTest('sound')">🔊 Test Sound</button>
  </div>

  <script>
    async function sendMessage(slot) {
      try {
        const res = await fetch(`/trigger/${slot}`);
        const result = await res.text();
        alert(`Message ${slot} sent: ${result}`);
      } catch (e) {
        alert(`Failed to send ${slot}: ${e}`);
      }
    }

    async function restartDevice() {
      if (confirm("Are you sure you want to restart the device?")) {
        await fetch('/restart');
        alert("Device restarting...");
      }
    }

    async function triggerTest(type) {
      try {
        const res = await fetch(`/test/${type}`);
        const result = await res.text();
        alert(`${type} test triggered: ${result}`);
      } catch (e) {
        alert(`Failed to trigger ${type}: ${e}`);
      }
    }

  </script>
</body>
</html>
